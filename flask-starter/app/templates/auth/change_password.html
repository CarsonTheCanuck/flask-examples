{% extends 'auth/_auth-layout.html' %}
{% set site_title = 'Change Password' %}

{% block auth_body %}
<form method="POST">
	{{ form.csrf_token }}

	<div class="form-group">
		{% set class = 'form-control is-invalid' if form.current_password.errors else 'form-control' %}
		{{ form.current_password.label }}
		{{ form.current_password(class=class) }}
		{% if form.current_password.errors %}
		<div class="invalid-feedback">
			<ul>
				{% for error in form.current_password.errors %}
				<li>{{ error }}</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
	</div>

	<div class="form-group">
		{% set class = 'form-control is-invalid' if form.new_password.errors else 'form-control' %}
		{{ form.new_password.label }}
		{{ form.new_password(class=class) }}
		{% if form.new_password.errors %}
		<div class="invalid-feedback">
			<ul>
				{% for error in form.new_password.errors %}
				<li>{{ error }}</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
	</div>

	<div class="form-group">
		{% set class = 'form-control is-invalid' if form.confirm_new_password.errors else 'form-control' %}
		{{ form.confirm_new_password.label }}
		{{ form.confirm_new_password(class=class) }}
		{% if form.confirm_new_password.errors %}
		<div class="invalid-feedback">
			<ul>
				{% for error in form.confirm_new_password.errors %}
				<li>{{ error }}</li>
				{% endfor %}
			</ul>
		<div class="invalid-feedback">
		{% endif %}
	</div>

	{{ form.submit(class='btn btn-primary btn-block', value='login') }}

	<div class="text-center mt-3">
		<a href="{{ url_for('homepage.index') }}">back to home</a>
	</div>

</form>
{% endblock auth_body %}
